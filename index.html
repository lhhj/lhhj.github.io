<!DOCTYPE html>
<html>
<head>
    <title>Asteroid Shooter</title>
    <style>
        body {
            background: #000;
            color: #fff;
            text-align: center;
        }
        canvas {
            margin: auto;
            display: block;
            background: #000;
        }
        #score, #highScore {
            color: #fff;
            position: absolute;
            padding: 10px;
        }
        #highScore {
            right: 0;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="score"></div>
    <div id="highScore"></div>

    <script>
        let canvas = document.getElementById('gameCanvas');
        let ctx = canvas.getContext('2d');

        let player = {
            x: canvas.width / 2,
            y: canvas.height - 50,
            width: 50,
            height: 50,
            dx: 5
        };

        let bullets = [];
        let asteroids = [];
        let asteroidSpeed = 2;
        let score = 0;
        let highScore = localStorage.getItem('highScore') || 0;
        let scoreText = document.getElementById('score');
        let highScoreText = document.getElementById('highScore');

        function drawPlayer() {
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x, player.y, player.width, player.height);
        }

        function drawBullets() {
            ctx.fillStyle = 'red';
            bullets.forEach((bullet, i) => {
                bullet.y -= 5;
                ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
                if (bullet.y < 0) {
                    bullets.splice(i, 1);
                }
            });
        }

        function generateAsteroids() {
            let asteroid = {
                x: Math.random() * (canvas.width - 50),
                y: 0,
                width: 50,
                height: 50
            };
            asteroids.push(asteroid);
        }

        function drawAsteroids() {
            ctx.fillStyle = 'grey';
            asteroids.forEach((asteroid, i) => {
                asteroid.y += asteroidSpeed;
                ctx.fillRect(asteroid.x, asteroid.y, asteroid.width, asteroid.height);
                if (asteroid.y > canvas.height) {
                    asteroids.splice(i, 1);
                }
            });
        }

        function detectCollision() {
            asteroids.forEach((asteroid, i) => {
                bullets.forEach((bullet, j) => {
                    if (bullet.x < asteroid.x + asteroid.width  && bullet.x + bullet.width  > asteroid.x &&
                        bullet.y < asteroid.y + asteroid.height && bullet.y + bullet.height > asteroid.y) {
                        asteroids.splice(i, 1);
                        bullets.splice(j, 1);
                        score++;
                        if(score > highScore) {
                            highScore = score;
                            localStorage.setItem('highScore', highScore);
                        }
                        scoreText.innerText = "Score: " + score;
                        highScoreText.innerText = "High Score: " + highScore;
                    }
                });
            });
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPlayer();
            drawBullets();
            drawAsteroids();
            detectCollision();

            if (Math.random() < 0.01) {
                generateAsteroids();
            }

            requestAnimationFrame(gameLoop);
        }

        window.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && player.x + player.width < canvas.width) {
                player.x += player.dx;
            } else if (e.key === 'ArrowLeft' && player.x > 0) {
                player.x -= player.dx;
            } else if (e.key === ' ') {
                let bullet = {
                    x: player.x + player.width / 2 - 2.5,
                    y: player.y,
                    width: 5,
                    height: 15
                };
                bullets.push(bullet);
            }
        });

        scoreText.innerText = "Score: " + score;
        highScoreText.innerText = "High Score: " + highScore;

        gameLoop();
    </script>
</body>
</html>
